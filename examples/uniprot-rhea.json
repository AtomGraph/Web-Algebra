{
    "ForEach": {
        "table": {
            "SELECT": {
                "endpoint": "https://sparql.uniprot.org/sparql",
                "query": "PREFIX up: <http://purl.uniprot.org/core/> PREFIX rhea: <http://rdf.rhea-db.org/> SELECT DISTINCT ?protein ?reaction WHERE { ?protein a up:Protein . ?protein up:annotation/up:catalyticActivity/up:catalyzedReaction ?reaction . FILTER (STRSTARTS(STR(?reaction), \"http://rdf.rhea-db.org/\")) } LIMIT 10"
            }
        },
        "operation": [
            {
                "PUT": {
                    "url": {
                        "ResolveURI": {
                            "base": "https://localhost:4443/proteins/",
                            "relative": {
                                "Replace": {
                                    "input": "${encodedProtein}/",
                                    "pattern": "\\$\\{encodedProtein\\}",
                                    "replacement": {
                                        "EncodeForURI": {
                                            "input": {
                                                "ValueOf": {
                                                    "var": "protein"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "data": {
                        "Replace": {
                            "input": {
                                "Replace": {
                                    "input": "<${protein}> <http://purl.uniprot.org/core/catalyzedReaction> <${reaction}> .",
                                    "pattern": "\\$\\{reaction\\}",
                                    "replacement": {
                                        "ValueOf": {
                                            "var": "reaction"
                                        }
                                    }
                                }
                            },
                            "pattern": "\\$\\{protein\\}",
                            "replacement": {
                                "ValueOf": {
                                    "var": "protein"
                                }
                            }
                        }
                    }
                }
            },
            {
                "POST": {
                    "url": {
                        "ResolveURI": {
                            "base": "https://localhost:4443/reactions/",
                            "relative": {
                                "Replace": {
                                    "input": "${encodedReaction}/",
                                    "pattern": "\\$\\{encodedReaction\\}",
                                    "replacement": {
                                        "EncodeForURI": {
                                            "input": {
                                                "ValueOf": {
                                                    "var": "reaction"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "data": {
                        "SELECT": {
                            "endpoint": "https://sparql.rhea-db.org/sparql",
                            "query": {
                                "Replace": {
                                    "input": "PREFIX rhea: <http://rdf.rhea-db.org/> PREFIX rh: <http://rdf.rhea-db.org/> SELECT DISTINCT ?reaction ?compound WHERE { <${reaction}> rhea:side/rh:contains ?compound . } LIMIT 10",
                                    "pattern": "\\$\\{reaction\\}",
                                    "replacement": {
                                        "ValueOf": {
                                            "var": "reaction"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        ]
    }
}
